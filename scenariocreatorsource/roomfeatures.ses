*NEW ROOM_FEATURE
    "name": "New Waypoint",
    "display_name": "{waypoint}: {waypoint_name}",
    "desc": "Adds a waypoint to this room.",
    "is_new_branch": true,
    "vars": {
      "waypoint": {"default_val": "ghwaypoints.Bookshelf", "var_type": "waypoint"},
      "waypoint_name": {"default_val": "", "var_type": "literal"},
      "anchor": {"default_val": null, "var_type": "map_anchor"}
    },
    "elements": {
      "WAYPOINT": {"e_type": "waypoint", "name": "{waypoint}: {waypoint_name}"}
    },
    "physicals": [
        {"element_key": "WAYPOINT", "parent": "ROOM"}
    ],
    "sorting_rank": 1000,
    "category": "WAYPOINTS"

*SCRIPT plot_subplots
+subplot WAYPOINT_{unique_id}_{_uid}

*SCRIPT main
class Waypoint_{unique_id}_{_uid}( Plot ):
    LABEL = "WAYPOINT_{unique_id}_{_uid}"
    active = True
    scope = "LOCALE"

    def custom_init( self, nart ):
        +init_plot
        #: plot_init
        #: plot_actions
        #: plot_subplots
        return True

    #: plot_methods

*SCRIPT scenario_build
the_world[{WAYPOINT_UID}] = {waypoint}(name={waypoint_name}, anchor={anchor})
the_world[{ROOM_UID}].contents.append(the_world[{WAYPOINT_UID}])



*NEW ROOM_FEATURE
    "name": "New NPC",
    "display_name": "NPC: {npc_name}",
    "desc": "Adds an NPC to this room.",
    "is_new_branch": true,
    "vars": {
      "npc_name": {"default_val": "", "var_type": "literal", "tooltip": "Leave blank for random name"},
      "npc_job": {"default_val": null, "var_type": "job", "tooltip": "Set None for random job"},
      "npc_faction": {"default_val":  null, "var_type": "faction"}
    },
    "elements": {
      "NPC": {"e_type": "npc", "name": "NPC: {npc_name}"}
    },
    "child_types": ["NPC_FEATURE"],
    "physicals": [
        {"element_key": "NPC", "parent": "ROOM"}
    ],
    "sorting_rank": 1000,
    "category": "NPCS"

*SCRIPT plot_subplots
+subplot NPC_{unique_id}_{_uid}

*SCRIPT main
class NonPlayerCharacter_{unique_id}_{_uid}( Plot ):
    LABEL = "NPC_{unique_id}_{_uid}"
    active = True
    scope = "LOCALE"

    def custom_init( self, nart ):
        +init_plot
        #: plot_init
        #: plot_actions
        #: plot_subplots
        return True

    #: plot_methods

    def NPC_offers(self, camp):
        mylist = list()
        #: npc_offers
        return mylist

*SCRIPT scenario_build
the_world[{NPC_UID}] = gears.selector.random_character(self.rank, local_tags=the_world[{METROSCENE_UID}].attributes, camp=nart.camp, name={npc_name}, job={npc_job}, faction={npc_faction})
the_world[{ROOM_UID}].contents.append(the_world[{NPC_UID}])

