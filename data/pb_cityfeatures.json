[
    {
    "name": "New Town Hall Scene",
    "desc": "Adds a town hall and a leader NPC to the city.",
    "label": "CITY_FEATURE",
    "is_new_branch": true,
    "vars": {
      "townhall_name": {"default_val": "Town Hall", "var_type": "string"}
    },
    "scripts": {
      "city_subplots": "self.add_sub_plot(nart, \"TOWNHALL_{uname}_{_uid}\")",
      "main": "class {scriptname}_{_uid}_Townhall( Plot ):\n    LABEL=\"TOWNHALL_{uname}_{_uid}\"\n    active = True\n    scope = \"METRO\"\n    def custom_init( self, nart ):\n        #: building_init\n        #: scene_init\n        #: building_subplots\n        #: scene_subplots\n        return True\n    def TOWNHALL_{_uid}_ENTER(self, camp):\n        pass\n        #: building_enter\n        #: scene_enter",
      "building_init": "# Create a building.\nteam1 = teams.Team(name=\"Player Team\")\nteam2 = teams.Team(name=\"Civilian Team\", allies=(team1,))\nmyscene = gears.GearHeadScene(50, 50, \"{city_name}\", player_team=team1, civilian_team=team2,scale=gears.scale.HumanScale, is_metro=True, faction={city_faction}, attributes=(gears.personality.GreenZone, gears.tags.City, gears.tags.SCENE_PUBLIC), exploration_music='airtone_-_reCreation.ogg')\n\n# Create a scene generator\nmyscenegen = pbge.randmaps.CityGridGenerator(myscene, game.content.gharchitecture.HumanScaleGreenzone(), road_terrain=game.content.ghterrain.Flagstone)\n\n# Register the city scene and the metro data\nself.register_scene(nart, myscene, myscenegen, ident=\"METROSCENE\")\nself.register_element(\"METRO\", myscene.metrodat)\n\n# Create the entry/exit point.\nmyroom = self.register_element(\"_ENTRY_ROOM\", pbge.randmaps.rooms.Room(3, 3, anchor=pbge.randmaps.anchors.south), dident=\"METROSCENE\")\nmygate = self.register_element(\"MISSION_GATE\", Exit(name=\"{entrance_name}\", desc=\"{entrance_desc}\",anchor=pbge.randmaps.anchors.middle,plot_locked=True), dident=\"_ENTRY_ROOM\")\nself.elements[\"LOCALE\"] = myscene\nself.elements[\"ENTRANCE\"] = mygate\n#:scene_init\n"
    },
    "child_types": ["SCENE_FEATURE"],
    "elements": {
      "TOWNHALL_{_uid}": {"e_type": "scene", "name": "{townhall_name}"}
    }
  }
]